Microsoft (R) Macro Assembler Version 14.16.27048.0	    08/12/22 12:42:45
CountChars_.asm						     Page 1 - 1


					.model flat, c
 00000000				.code

				; extern "C" int CountChars_(const wchar_t *, wchar_t);
				; Description: This fuction counts the number of occurrences
				;				of 'c' in 'str1 or str2'
				; Reutrn: Number of occurrences of 'c'
 00000000			CountChars_	proc
 00000000  55				push ebp
 00000001  8B EC			mov ebp, esp
 00000003  56				push esi

				; Load parameters and initialize count registers
 00000004  8B 75 08			mov esi, [ebp + 8]			; esi = 'str'
 00000007  66| 8B 4D 0C			mov cx, [ebp + 12]			; cx = 'c'
 0000000B  33 D2			xor edx, edx				; edx = Number of occurrences

				; Repeate loop until the entire string has been scanned
 0000000D			@@:
 0000000D  66| AD			Lodsw						; load next char in ax
 0000000F  66| 0B C0			or ax, ax					; test for end of string
 00000012  74 08			jz @F						; jump if end of string found
 00000014  66| 3B C1			cmp ax, cx					; test current char
 00000017  75 F4			jne @B						; jump if no match
 00000019  42				inc edx						; update match count
 0000001A  EB F1			jmp @B

 0000001C			@@:
 0000001C  8B C2			mov eax, edx
 0000001E  5E				pop esi
 0000001F  5D				pop ebp
 00000020  C3				ret

 00000021			CountChars_ endp
					end
Microsoft (R) Macro Assembler Version 14.16.27048.0	    08/12/22 12:42:45
CountChars_.asm						     Symbols 2 - 1




Segments and Groups:

                N a m e                 Size     Length   Align   Combine Class

FLAT . . . . . . . . . . . . . .	GROUP
_DATA  . . . . . . . . . . . . .	32 Bit	 00000000 Para	  Public  'DATA'	
_TEXT  . . . . . . . . . . . . .	32 Bit	 00000021 Para	  Public  'CODE'	


Procedures, parameters, and locals:

                N a m e                 Type     Value    Attr

CountChars_  . . . . . . . . . .	P Near	 00000000 _TEXT	Length= 00000021 Public C


Symbols:

                N a m e                 Type     Value    Attr

@CodeSize  . . . . . . . . . . .	Number	 00000000h   
@DataSize  . . . . . . . . . . .	Number	 00000000h   
@Interface . . . . . . . . . . .	Number	 00000001h   
@Model . . . . . . . . . . . . .	Number	 00000007h   
@code  . . . . . . . . . . . . .	Text   	 _TEXT
@data  . . . . . . . . . . . . .	Text   	 FLAT
@fardata?  . . . . . . . . . . .	Text   	 FLAT
@fardata . . . . . . . . . . . .	Text   	 FLAT
@stack . . . . . . . . . . . . .	Text   	 FLAT

	   0 Warnings
	   0 Errors
